<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Editor demo</title>
  <link rel="stylesheet" href="css/minislate-full.css" />
  <style type="text/css">
  body {
    font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    font-size: 16px;
  }
  .editable, .noneditable, body > p {
    width: 80%;
    margin: 0 auto;
  }
  textarea {
    width: 100%;
    padding: 5px;
  }
  </style>
</head>
<body>
<div class="editable">
<h1>Test</h1>


<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam vel sodales nunc. Phasellus elit
augue, interdum <a href="http://google.com/">tristique nisl</a> ut, ultricies mattis elit. Mauris eu fringilla lacus. Vestibulum ac
erat vel mi <strong>accumsan</strong> cursus sit amet dapibus mi. Praesent iaculis tempor dictum. Donec eu lorem et
turpis tincidunt congue. Sed <em><strong>sagittis</strong></em> diam ut felis iaculis euismod.</p>

<blockquote><p>Ut non est in dolor <em>ornare <strong>auctor</strong></em>. Cras sit amet neque a lorem sagittis accumsan. Fusce quis arcu
id nibh consectetur auctor sed sit amet lectus. Duis ultricies et orci vel accumsan. Praesent
ultrices dui ligula, sit amet semper diam aliquam eget.</p></blockquote>

<p><img src="./image1.jpg" alt="" /></p>

<p>Mauris <em>hendrerit <u><span><strong>velit</strong></span></u> nec</em> arcu fermentum, sit amet congue tellus gravida. In leo erat, egestas
id tortor et, facilisis malesuada eros. Nam vitae eleifend augue. Pellentesque eu massa a turpis
feugiat vehicula vel sit amet enim.</p>
</div>


<div class="noneditable">
<h2>Non editable</h2>

<p>Quisque id tortor lectus. Cras non leo non metus luctus faucibus. Sed in nisl ultricies,
venenatis turpis id, dignissim eros. Donec pharetra gravida ligula at consequat.</p>
</div>


<div class="editable">
<h2>Another editable section.</h2>
<p>Aspernatur perspiciatis sunt maiores nam repellendus laboriosam necessitatibus deserunt, harum
iusto molestiae consectetur <span class=woot>qui</span> sequi numquam deleniti pariatur.</p>
 <p style="   ">Lorem</p>


</div>

<script src="js/minislate.js"></script>
<script>
window.addEventListener('DOMContentLoaded', function() {
    function newEditor(element) {
      var editor = new Minislate.oneLineEditor(element);

      var htmlResult = document.createElement('textarea');
      htmlResult.setAttribute('rows', 10);
      htmlResult.setAttribute('cols', 80);

      var button = document.createElement('button');
      button.addEventListener('click', function(evt) {
        evt.preventDefault();
        var html = editor.serialize(true);

        if (!htmlResult.parentNode) {
          button.parentNode.insertBefore(htmlResult, button.nextSibling);
        }
        while (htmlResult.firstChild) {
          htmlResult.removeChild(htmlResult.firstChild);
        }
        htmlResult.appendChild(document.createTextNode(html));
      });
      button.appendChild(document.createTextNode('serialize'));
      var p = document.createElement('p');
      p.appendChild(button);
      element.parentNode.insertBefore(p, element.nextSibling);
    }

    var elements = document.querySelectorAll('.editable');
    for (var i=0; i<elements.length; i++) {
      newEditor(elements[i]);
    }
});
</script>
</body>
</html>
